<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wordle</title>
    <link rel="shortcut icon" href="images/icon.png" type="image/png">
    <link rel="stylesheet" href="css/icon.css">
    <link rel="stylesheet" href="css/font.css">
    <link rel="manifest" href="main/manifest.json">
    <style>
        ::-webkit-scrollbar {
            width: 5px;
        }
        ::-webkit-scrollbar-track {
            background: #f2f2ff;
            border-radius: 2px;
        }
        ::-webkit-scrollbar-thumb {
            background: #e5e5f5;
            border-radius: 2px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #d5d5e5;
        }
        body {
            overflow: hidden;
            font-family: 'Montserrat', 'Open Sans', sans-serif;
            background-color: #f8f8ff;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        .game-container {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .board {
            margin-top: 23px;
            display: grid;
            margin-bottom: 23px;
        }
        .board-row {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }
        .tile {
            font-family: 'Open Sans', 'Montserrat', sans-serif;
            color: #334;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 2px solid #d3d6da;
            border-radius: 6px;
            font-size: 26px;
            font-weight: bold;
            background-color: #eef;
            transition: background-color 0.2s ease;
            transition: border 0.2s ease;
        }
        .Tile {
            font-family: 'Open Sans', 'Montserrat', sans-serif;
            color: #334;
            width: 32px;
            height: 32px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 6px;
            font-size: 15px;
            font-weight: bold;
            color: #f8f8ff;
            background-color: #aac;
        }
        .yeTile {
            font-family: 'Open Sans', 'Montserrat', sans-serif;
            color: #334;
            width: 32px;
            height: 32px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 6px;
            font-size: 15px;
            font-weight: bold;
            color: #f8f8ff;
            background-color: #ec3;
        }
        .grTile {
            font-family: 'Open Sans', 'Montserrat', sans-serif;
            color: #334;
            width: 32px;
            height: 32px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 6px;
            font-size: 15px;
            font-weight: bold;
            color: #f8f8ff;
            background-color: #4b4;
        }
        .keyboard {
            display: grid;
        }
        .keyboard-row {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        .key {
            font-family: 'Open Sans', 'Montserrat', sans-serif;
            color: #334;
            width: 71px;
            height: 52.5px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background-color: #dde;
            outline: none;
            font-size: 21.5px;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }
        .key:hover {
            background-color: #ccd;
        }
        .key:active {
            background-color: #bbc;
        }
        .bs-key {
            width: 110.5px;
            height: 52.5px;
            display: flex;
            color: #f8f8ff;
            justify-content: center;
            align-items: center;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background-color: #78f;
            outline: none;
            font-size: 25px;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }
        .bs-key:hover {
            background-color: #67e;
        }
        .bs-key:active {
            background-color: #56d;
        }
        .et-key {
            font-family: 'Montserrat', 'Open Sans', sans-serif;
            width: 110.5px;
            height: 52.5px;
            display: flex;
            color: #f8f8ff;
            justify-content: center;
            align-items: center;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background-color: #78f;
            outline: none;
            font-size: 21.5px;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }
        .et-key:hover {
            background-color: #67e;
        }
        .et-key:active {
            background-color: #56d;
        }
        .gy-key {
            font-family: 'Open Sans', 'Montserrat', sans-serif;
            width: 71px;
            height: 52.5px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background-color: #aac;
            outline: none;
            color: #f8f8ff;
            font-size: 21.5px;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }
        .gy-key:hover {
            background-color: #99b;
        }
        .gy-key:active {
            background-color: #88a;
        }
        .ye-key {
            font-family: 'Open Sans', 'Montserrat', sans-serif;
            width: 71px;
            height: 52.5px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background-color: #ec3;
            outline: none;
            color: #f8f8ff;
            font-size: 21.5px;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }
        .ye-key:hover {
            background-color: #db2;
        }
        .ye-key:active {
            background-color: #ca1;
        }
        .gr-key {
            font-family: 'Open Sans', 'Montserrat', sans-serif;
            width: 71px;
            height: 52.5px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background-color: #4b4;
            outline: none;
            color: #f8f8ff;
            font-size: 21.5px;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }
        .gr-key:hover {
            background-color: #3a3;
        }
        .gr-key:active {
            background-color: #292;
        }
        .win-lost {
            display: flex;
            visibility: hidden;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 20px;
            justify-content: center;
            font-family: 'Montserrat', 'Open Sans', sans-serif;
            font-size: 26px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        #settingsBtn {
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            top: 20px;
            outline: none;
            left: 50%;
            border-radius: 6px;
            width: 40px;
            height: 40px;
            transform: translateX(351px);
            background-color: #e5e5f5;
            color: #556;
            border: none;
            cursor: pointer;
            font-size: 20px;
            transition: background-color 0.2s ease;
        }
        #settingsBtn:hover {
            color: #78f;
            background-color: #ddf;
        }
        #settingsBtn:active {
            color: #67e;
            background-color: #cce;
        }
        #reDo {
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            top: 20px;
            outline: none;
            left: 50%;
            border-radius: 6px;
            width: 40px;
            height: 40px;
            transform: translateX(304px);
            background-color: #e5e5f5;
            color: #556;
            border: none;
            cursor: pointer;
            font-size: 20px;
            transition: background-color 0.2s ease;
        }
        #reDo:hover {
            color: #78f;
            background-color: #ddf;
        }
        #reDo:active {
            color: #67e;
            background-color: #cce;
        }
        #giveUp {
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            top: 20px;
            outline: none;
            left: 50%;
            border-radius: 6px;
            width: 100px;
            height: 40px;
            transform: translateX(197px);
            background-color: #e5e5f5;
            color: #556;
            border: none;
            cursor: pointer;
            font-size: 20px;
            font-family: 'Montserrat', 'Open Sans', sans-serif;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }
        #giveUp:hover {
            color: #78f;
            background-color: #ddf;
        }
        #giveUp:active {
            color: #67e;
            background-color: #cce;
        }
        .overlay {
            visibility: hidden;
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        .popup-content {
            text-align: center;
            background-color: #f8f8ff;
            padding: 20px;
            border-radius: 5px;
            z-index: 1001;
            width: 420px;
            flex-wrap: wrap;
            overflow-y: auto;
            font-size: 20px;
            color: #334;
            font-family: 'Montserrat', 'Open Sans', sans-serif;
        }
        .close-btn {
            position: absolute;
            top: 2px;
            right: 10px;
            cursor: pointer;
            font-size: 32px;
            color: #aaa;
            transition: color 0.2s ease;
        }
        .close-btn:hover {
            color: #999;
        }
        .close-btn:hover {
            color: #888;
        }
        #answerWord {
            text-transform: uppercase;
            vertical-align: top;
            color: #334;
            font-size: 25px;
            font-weight: bold;
            padding: 10px;
            display: flex;
            gap: 4px;
            justify-content: center;
            align-items: center;
        }
        #RedoPopup {
            display: flex;
            justify-content: center;
            align-items: center;
            top: 20px;
            outline: none;
            border-radius: 6px;
            margin-right: auto;
            width: 80px;
            height: 40px;
            background-color: #78f;
            color: #f8f8ff;
            border: none;
            cursor: pointer;
            font-size: 20px;
            transition: background-color 0.2s ease;
        }
        #RedoPopup:hover {
            background-color: #67e;
        }
        #RedoPopup:active {
            background-color: #56d;
        }
        .code-box {
            user-select: text;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            border: 1px solid #d3d6da;
            border-radius: 1px;
            background-color: #f3f3ff;
            width: 100%;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
            line-height: 1.5;
            padding: 10px;
            align-items: center;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        .option {
            display: flex;
            justify-content: center;
            align-items: center;
            top: 20px;
            outline: none;
            border-radius: 6px;
            width: 32px;
            height: 32px;
            background-color: #e5e5f5;
            color: #556;
            border: none;
            cursor: pointer;
            font-size: 15px;
            font-family: 'Montserrat', 'Open Sans', sans-serif;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }
        .option:hover {
            color: #78f;
            background-color: #ddf;
        }
        .option:active {
            color: #67e;
            background-color: #cce;
        }
        .selected {
            background-color: #78f;
            color: #f8f8ff;
        }
        .selected:hover {
            color: #f8f8ff;
            background-color: #67e;
        }
        .selected:active {
            color: #f8f8ff;
            background-color: #56d;
        }
        #options-container {
            display: flex;
            gap: 4px;
            justify-content: center;
            align-items: center;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 28px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #e5e5f5;
            -webkit-transition: 0.2s;
            transition: 0.2s;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: #f8f8ff;
            -webkit-transition: 0.2s;
            transition: 0.2s;
        }
        input:checked + .slider {
            background-color: #78f;
        }
        input:hover + .slider {
            background-color: #ddf;
        }
        input:hover:checked + .slider {
            background-color: #67e;
        }
        input:checked + .slider:before {
            -webkit-transform: translateX(22px);
            -ms-transform: translateX(22px);
            transform: translateX(22px);
        }
        .slider.round {
            border-radius: 28px;
        }
        .slider.round:before {
            border-radius: 50%;
        }
        #Share {
            display: flex;
            justify-content: center;
            align-items: center;
            top: 20px;
            outline: none;
            border-radius: 6px;
            margin-left: auto;
            width: 80px;
            height: 40px;
            background-color: #78f;
            color: #f8f8ff;
            border: none;
            cursor: pointer;
            font-size: 20px;
            transition: background-color 0.2s ease;
        }
        #Share:hover {
            background-color: #67e;
            transition: background-color 0.2s ease;
        }
        #Share:active {
            background-color: #56d;
            transition: background-color 0.2s ease;
        }
        #Copy {
            display: flex;
            justify-content: center;
            align-items: center;
            top: 20px;
            outline: none;
            border-radius: 6px;
            margin-left: auto;
            margin-right: auto;
            width: 130px;
            height: 40px;
            background-color: #78f;
            color: #f8f8ff;
            border: none;
            cursor: pointer;
            font-weight: bold;
            font-size: 17.2px;
            transition: background-color 0.2s ease;
        }
        #Copy:hover {
            background-color: #67e;
            transition: background-color 0.2s ease;
        }
        #Copy:active {
            background-color: #56d;
            transition: background-color 0.2s ease;
        }
        #cpd {
            font-size: 15px;
            color:#4b4;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        #cpd2 {
            font-size: 15px;
            color:#4b4;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        #input {
            width: 100%;
            height: 42px;
            padding: 0 13px;
            border: 0;
            border-radius: 7px;
            font-size: 18px;
            color: #334;
            background-color: #e5e5f5;
            margin: 10px 0 5px;
            border-radius: 5px;
            max-width: 300px;
            transition: background-color 0.2s ease;
        }
        #input::-webkit-input-placeholder {
            color: #99b;
        }
        #input:-moz-placeholder {
            color: #99b;
            opacity: 1; 
        }
        #input::-moz-placeholder {
            color: #99b;
            opacity: 1; 
        }
        #input:-ms-input-placeholder {
            color: #99b;
        }
        #input::placeholder {
            color: #99b;
        }
        #input:hover {
            outline: 0;
            background-color: rgb(231, 231, 255);
            transition: background-color 0.2s ease;
        }
        #input:focus {
            outline: 0;
            background-color: rgb(231, 231, 255);
            transition: background-color 0.2s ease;
        }
        #see {
            color: #556;
        }
        #see:hover {
            color: #78f;
        }
        #see:active {
            color: #67e;
        }
        .keys {
            position: relative;
        }
        .keys::after {

            content: attr(data-after-content); 
            position: absolute; 
            right: 0; 
            top: 0;
            color: white; 
            padding: 2px 6px; 
            font-size: 12px;
            border-radius: 50%; 
        }
    </style>
</head>
<body>
    <div id="overlay" class="overlay">
        <div class="popup-content" id="ans">
            <span class="close-btn" id="closePopup">&times;</span>
            <div style="margin-bottom: 10px; margin-top: 30px; font-weight: bold;">Answer</div>
            <div id="answerWord"></div>
            <hr style="display: block;height: 2px;margin: 15px 15px; border: 0;background: #ddf;">
            <div style="margin-bottom: 20px; margin-top: 10px; font-weight: bold;">Meaning</div>
            <div style="display:flex; justify-content: center; margin-bottom: 20px; margin-left: 12px; margin-right: 12px; ">
                <div class="code-box" id="answerMean"></div>
            </div>
            <div style="display:flex;align-items: center;">
                <div id="cpd" style="position:absolute;bottom:42px; left:37px;">Link Copied!</div>
                <div style="width:100%;display:flex;gap: 20px;">
                    <div class="fa fa-share" id="Share" style="margin-bottom: 10px; "></div>
                    <div class="fa fa-redo" id="RedoPopup" style="margin-bottom: 10px; "></div>
                </div>
            </div>
        </div>
    </div>
    <div id="settinglay" class="overlay">
        <div class="popup-content" id="set" style="overflow: hidden;">
            <span class="close-btn" id="closeSetting">&times;</span>
            <div style="margin-top: 30px;overflow-y: auto;max-height: 500px; margin-bottom: 10px;position: relative; ">
                <div style="margin-bottom: 20px;font-weight: bold;" id="nn">Number of Letters</div>
                <div id="options-container"></div>
                <hr style="display: block;height: 2px;margin: 25px 15px; border: 0;background: #ddf;">
                <div style="display:flex; align-items: center;">
                    <div>
                        <div style="margin-left: 10px;text-align: left;font-weight: bold;" id="nf">Familiar Mode</div>
                        <div style="width:330px; margin-left: 10px;font-size: 15px;color:#aab;text-align: left;">Answer will be selected from top 10000 words</div>
                    </div>
                    <label class="switch" style="margin-left: auto; margin-right: 10px;">
                        <input type="checkbox" id="easy">
                        <span class="slider round"></span>
                    </label>
                </div>
                <hr style="display: block;height: 2px;margin: 25px 15px; border: 0;background: #ddf;">
                <div style="display:flex; align-items: center;">
                    <div>
                        <div style="margin-left: 10px;text-align: left;font-weight: bold;" id="nc">Circle Mode</div>
                        <div style="width:330px; margin-left: 10px;font-size: 15px;color:#aab;text-align: left;">Answer of the previous round will serve as the first guess for the next round</div>
                    </div>
                    <label class="switch" style="margin-left: auto; margin-right: 10px;">
                        <input type="checkbox" id="circle">
                        <span class="slider round"></span>
                    </label>
                </div>
                <hr style="display: block;height: 2px;margin: 25px 15px; border: 0;background: #ddf;">
                <div>
                    <div style="font-weight: bold;">Custom Word</div>
                    <div style="width:400px; margin-left: 10px;font-size: 15px;color:#aab;text-align: left;">Create a custom game with a word consisting of 4-11 letters</div>
                    <input id="input" type="password" style="margin-top: 20px;position:relative;" placeholder="Your word..."></input>
                    <div id="see" class="fa fa-eye-slash" style="position: absolute; left:335px; margin-top: 32px;"></div>
                    <div id="Copy" style="margin-top: 20px; ">Copy Link</div>
                    <div id="cpd2" style="position:absolute;bottom:42px; left:62px;">Link Copied!</div>
                </div>
            </div>
        </div>
    </div>
    <div style="position: absolute;display: flex;justify-content: center;align-items: center;left: 0;top: 0;width: 100%;height: 100%;">
    <div id="top" style="width:848px;height:747px;">
            <div id="lost" class="win-lost">💔
                <div style="font-size: 30px; margin-top: 2px;">&nbsp;You&nbsp;</div>
                <div style="font-size: 30px; color: #aac; margin-top: 2px;">LOST</div>
                <div style="font-size: 30px; margin-top: 2px;">&nbsp;!&nbsp;</div>💔
            </div>
            <div id="cant" class="win-lost">
            </div>
            <div id="win" class="win-lost">🏆
                <div style="font-size: 30px; margin-top: 2px;">&nbsp;You&nbsp;</div>
                <div style="font-size: 30px; color: #4b4; margin-top: 2px;">WON</div>
                <div style="font-size: 30px; margin-top: 2px;">&nbsp;!&nbsp;</div>🏆
            </div>
            <div id="buttons" style="display:none;">
                <div id="giveUp">Answer</div>
                <div id="settingsBtn" class="fa fa-cog"></div>
                <div id="reDo" class="fa fa-redo"></div>
            </div>
            <div class="game-container">
                <div id="board" class="board">
                </div>
                <div id="keyboard" class="keyboard">
                </div>
            </div>
        </div>
    </div>
    <script>
        let meaning = null;
        let words = null;
        let mini_words = null;
        let ext_words = null;
    </script>
    <script src="https://gitee.com/GodForever/wordle/raw/main/javascript/wordlist.js"></script>
    <script src="javascript/mini_wordlist.js"></script>
    <script src="https://gitee.com/GodForever/wordle/raw/main/javascript/word_meanings.js"></script>
    <script src="https://gitee.com/GodForever/wordle/raw/main/javascript/extend_wordlist.js"></script>
    <script>
        let cpms=[];
        function judge(){

        }
        function copyToClipboard(text) {
            if (navigator.clipboard && window.isSecureContext) {
                cpms.forEach(element => clearTimeout(element));
                cpms=[];
                document.getElementById('cpd').style.color='#4B4';
                document.getElementById('cpd').textContent='Link Copied!';
                document.getElementById('cpd').style.opacity=1;
                document.getElementById('cpd2').style.color='#4B4';
                document.getElementById('cpd2').style.left='62px';
                document.getElementById('cpd2').textContent='Link Copied!';
                document.getElementById('cpd2').style.opacity=1;
                cpms.push(setTimeout(()=>{document.getElementById('cpd').style.opacity = '0';document.getElementById('cpd2').style.opacity = '0';},1000));
                return navigator.clipboard.writeText(text);
            } else {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    const successful = document.execCommand('copy');
                    if (!successful) {
                        cpms.forEach(element => clearTimeout(element));
                        cpms=[];
                        document.getElementById('cpd').style.color='#f77';
                        document.getElementById('cpd').textContent='Copy failed!';
                        document.getElementById('cpd').style.opacity=1;
                        document.getElementById('cpd2').style.color='#f77';
                        document.getElementById('cpd2').style.left='62px';
                        document.getElementById('cpd2').textContent='Copy failed!';
                        document.getElementById('cpd2').style.opacity=1;
                        cpms.push(setTimeout(()=> {document.getElementById('cpd').style.opacity = '0';document.getElementById('cpd2').style.opacity = '0';},1000));
                    }
                    else
                    {
                        cpms.forEach(element => clearTimeout(element));
                        cpms=[];
                        document.getElementById('cpd').style.color='#4B4';
                        document.getElementById('cpd').textContent='Link Copied!';
                        document.getElementById('cpd').style.opacity=1;
                        document.getElementById('cpd2').style.color='#4B4';
                        document.getElementById('cpd2').style.left='62px';
                        document.getElementById('cpd2').textContent='Link Copied!';
                        document.getElementById('cpd2').style.opacity=1;
                        cpms.push(setTimeout(()=> {document.getElementById('cpd').style.opacity = '0';document.getElementById('cpd2').style.opacity = '0';},1000));
                    }
                } catch (err) {
                    cpms.forEach(element => clearTimeout(element));
                    cpms=[];
                    document.getElementById('cpd').style.color='#f77';
                    document.getElementById('cpd').textContent='Copy failed!';
                    document.getElementById('cpd').style.opacity=1;
                    document.getElementById('cpd2').style.color='#f77';
                    document.getElementById('cpd2').style.left='62px';
                    document.getElementById('cpd2').textContent='Copy failed!';
                    document.getElementById('cpd2').style.opacity=1;
                    cpms.push(setTimeout(()=> {document.getElementById('cpd').style.opacity = '0';document.getElementById('cpd2').style.opacity = '0';},1000));
                }
                document.body.removeChild(textArea);
            }
        }
        function copylink() {
            copyToClipboard(window.location.origin + window.location.pathname + "?"+encode62(targetWord));
        }
        function generateOptions() {
            var container = document.getElementById('options-container');
            container.innerHTML = '';
            for (var i = 4; i <= 11; i++) {
                var div = document.createElement('div');
                div.className = 'option';
                div.textContent = i;
                div.dataset.value = i;
                div.addEventListener('click', function() {
                    selectOption(this);
                });
                if (i === length) {
                    div.classList.add('selected');
                }
                container.appendChild(div);
            }
        }
        let costom = false;
        let circl = false;
        let use_mini = false;
        let length = 5;
        let see = true;
        let lastWord = {};
        function saveToCookie(length, use_mini,see,circl,lastWord) {
            localStorage.setItem('length', length);
            localStorage.setItem('use_mini', use_mini);
            localStorage.setItem('see', see);
            localStorage.setItem('circl', circl);
            localStorage.setItem('lastWord',JSON.stringify(lastWord));
        }
        function loadFromCookie() {
            length = localStorage.getItem('length') == null ? 5 : parseInt(localStorage.getItem('length'));
            use_mini = localStorage.getItem('use_mini') == null ? false : localStorage.getItem('use_mini') === 'true';
            see = localStorage.getItem('see') == null ? true : localStorage.getItem('see') === 'true';
            circl = localStorage.getItem('circl') == null ? false : localStorage.getItem('circl') === 'true';
            lastWord = localStorage.getItem('lastWord') == null ? {} : JSON.parse(localStorage.getItem('lastWord'));
        }
        loadFromCookie();
        function stringToUniqueNumber(str) {
            let num = 0n;
            for (let i = 0; i < str.length; i++) {
                num = num * 256n + BigInt(str.charCodeAt(i));
            }
            return num;
        }
        const BASE62_CHARACTERS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
        const BASE62_RADIX = BASE62_CHARACTERS.length;
        function base62Encode(num) {
            let result = '';
            while (num > 0) {
                result = BASE62_CHARACTERS[num % BigInt(BASE62_RADIX)] + result;
                num = num / BigInt(BASE62_RADIX);
            }
            return result;
        }
        function base62Decode(str) {
            let result = 0n;
            for (let i = 0; i < str.length; i++) {
                result = result * BigInt(BASE62_RADIX) + BigInt(BASE62_CHARACTERS.indexOf(str[i]));
            }
            return result;
        }
        function uniqueNumberToString(num) {
            let str = '';
            while (num > 0) {
                str = String.fromCharCode(Number(num % 256n)) + str;
                num = num / 256n;
            }
            return str;
        }
        function encode62(str) {
            return  base62Encode(stringToUniqueNumber(str));
        }
        function decode62(str) {
            return  uniqueNumberToString(base62Decode(str));
        }
        if(see) {
            document.getElementById('see').className="fa fa-eye-slash";
            document.getElementById('see').style.left="335px";
            document.getElementById('input').type = 'text';
        }
        else {
            document.getElementById('see').className="fa fa-eye";
            document.getElementById('see').style.left="336px";
            document.getElementById('input').type = 'password';
        }
        function selectOption(selectedDiv) {
            var options = document.querySelectorAll('.option');
            options.forEach(function(option) {
                option.classList.remove('selected');
            });
            selectedDiv.classList.add('selected');
            length = parseInt(selectedDiv.dataset.value);
            saveToCookie(length,use_mini,see,circl,lastWord);
            costom = false;
            history.pushState(null, '', window.location.pathname);
            isWin = false;
            let target = [];
            if(use_mini) target = mini_words[length];
            else target = words[length];
            const randomIndex = Math.floor(Math.random() * target.length);
            targetWord = target[randomIndex][0].toUpperCase();
            let contain = document.getElementById('answerWord');
            contain.innerHTML = '';
            Tile = [];
            for (var i = 0; i < targetWord.length; i++) {
                var div = document.createElement('div');
                div.textContent = targetWord[i];
                div.className = 'Tile';
                Tile.push(div);
                contain.appendChild(div);
            }
            document.getElementById('answerMean').textContent = target[randomIndex][1];
            currentRow = 0;
            currentTile = 0;
            guess = '';
            messages = [];
            document.getElementById('buttons').style.display = 'flex';
            document.getElementById('win').style.visibility = 'hidden';
            document.getElementById('win').style.opacity = '0';
            document.getElementById('lost').style.visibility = 'hidden';
            document.getElementById('lost').style.opacity = '0';
            document.getElementById('cant').style.visibility = 'hidden';
            document.getElementById('cant').style.opacity = '0';
            createBoard();
            createKeyboard();
        }
        document.getElementById('easy').checked=use_mini;
        document.getElementById('circle').checked=circl;
        var switches = document.querySelectorAll('.switch input[type="checkbox"]');
        switches.forEach(function(switchElement) {
            switchElement.addEventListener('change', function(event) {
                var switchId = event.target.id;
                var switchState = event.target.checked;
                if (switchId === 'easy') {
                    use_mini = switchState;
                    saveToCookie(length,use_mini,see,circl,lastWord);
                }
                if (switchId === 'circle') {
                    circl = switchState;
                    saveToCookie(length,use_mini,see,circl,lastWord);
                }
                costom = false;
                history.pushState(null, '', window.location.pathname);
                isWin = false;
                let target = [];
                if(use_mini) target = mini_words[length];
                else target = words[length];
                const randomIndex = Math.floor(Math.random() * target.length);
                targetWord = target[randomIndex][0].toUpperCase();
                let contain = document.getElementById('answerWord');
                contain.innerHTML = '';
                Tile = [];
                for (var i = 0; i < targetWord.length; i++) {
                    var div = document.createElement('div');
                    div.textContent = targetWord[i];
                    div.className = 'Tile';
                    Tile.push(div);
                    contain.appendChild(div);
                }
                document.getElementById('answerMean').textContent = target[randomIndex][1];
                currentRow = 0;
                currentTile = 0;
                guess = '';
                messages = [];
                document.getElementById('buttons').style.display = 'flex';
                document.getElementById('win').style.visibility = 'hidden';
                document.getElementById('win').style.opacity = '0';
                document.getElementById('lost').style.visibility = 'hidden';
                document.getElementById('lost').style.opacity = '0';
                document.getElementById('cant').style.visibility = 'hidden';
                document.getElementById('cant').style.opacity = '0';
                createBoard();
                createKeyboard();
            });
        });
        const keyboardLayout = [
            'QWERTYUIOP',
            'ASDFGHJKL',
            '\u232bZXCVBNM\u21b5'
        ];
        let isWin = false;
        let currentRow = 0;
        let currentTile = 0;
        let guess = '';
        let messages = [];
        let Tile = [];
        document.getElementById('RedoPopup').addEventListener('click', () => {
            costom = false;
            history.pushState(null, '', window.location.pathname);
            init();
        });
        document.getElementById('see').addEventListener('click', () => {
            if(document.getElementById('see').className==="fa fa-eye") {
                document.getElementById('see').className="fa fa-eye-slash";
                document.getElementById('see').style.left="335px";
                document.getElementById('input').type = 'text';
                see=true;
                saveToCookie(length,use_mini,see,circl,lastWord);
            }
            else if(document.getElementById('see').className==="fa fa-eye-slash") {
                document.getElementById('see').className="fa fa-eye";
                document.getElementById('see').style.left="336px";
                document.getElementById('input').type = 'password';
                see=false;
                saveToCookie(length,use_mini,see,circl,lastWord);
            }
        });
        document.getElementById('Share').addEventListener('click', () => {
            copylink();
        });
        document.getElementById('Copy').addEventListener('click', () => {
            var word = document.getElementById('input').value.toUpperCase();
            var exist = false;
            for (let i = 4; i < 12; i++) {
                if(ext_words[i].includes(word)) {
                    exist=true;
                    break;
                }
            }
            if(exist) copyToClipboard(window.location.origin + window.location.pathname + "?"+encode62(word));
            else {
                cpms.forEach(element => clearTimeout(element));
                cpms=[];
                document.getElementById('cpd2').style.color='#f77';
                document.getElementById('cpd2').style.left='60px';
                document.getElementById('cpd2').textContent='Invalid word!';
                document.getElementById('cpd2').style.opacity=1;
                cpms.push(setTimeout(()=> {document.getElementById('cpd2').style.opacity = '0';},1000));
                    
            }
        });
        document.getElementById('reDo').addEventListener('click', () => {costom = false;history.pushState(null, '', window.location.pathname);init()});
        window.addEventListener('resize', () => {
            document.getElementById('set').style.transform = `scale(${Math.min(window.innerHeight/747,window.innerWidth/848)})`;
            document.getElementById('ans').style.transform = `scale(${Math.min(window.innerHeight/747,window.innerWidth/848)})`;
            document.getElementById('top').style.transform = `scale(${Math.min(window.innerHeight/747,window.innerWidth/848)}) translateY(${10*Math.min(window.innerHeight/747,window.innerWidth/848)}px)`;
        });
        document.getElementById('set').style.transform = `scale(${Math.min(window.innerHeight/747,window.innerWidth/848)})`;
        document.getElementById('ans').style.transform = `scale(${Math.min(window.innerHeight/747,window.innerWidth/848)})`;
        document.getElementById('top').style.transform = `scale(${Math.min(window.innerHeight/747,window.innerWidth/848)}) translateY(${10*Math.min(window.innerHeight/747,window.innerWidth/848)}px)`;
        document.getElementById('giveUp').addEventListener('click', () => {
            currentRow = 6;
            if (isWin) {
                const result = document.getElementById('win');
                result.style.visibility = 'visible';
                result.style.opacity = '1';
            }
            else if (currentRow == 6) {
                const result = document.getElementById('lost');
                result.style.visibility = 'visible';
                result.style.opacity = '1';
            }
            document.getElementById('overlay').style.visibility = 'visible';
            document.getElementById('overlay').style.opacity = '1';
            if (document.getElementById('answerMean').clientHeight > 41) {
                document.getElementById('answerMean').style.textAlign = "left";
            }
            else {
                document.getElementById('answerMean').style.textAlign = "center";
            }
        });
        document.getElementById('settingsBtn').addEventListener('click', () => {
            document.getElementById('settinglay').style.visibility = 'visible';
            document.getElementById('settinglay').style.opacity = '1';
        });
        document.getElementById('closePopup').addEventListener('click', () => {
            document.getElementById('overlay').style.opacity = '0';
            setTimeout(()=> {document.getElementById('overlay').style.visibility = 'hidden';},200)
        });
        document.getElementById('closeSetting').addEventListener('click', () => {
            document.getElementById('settinglay').style.opacity = '0';
            setTimeout(()=> {document.getElementById('settinglay').style.visibility = 'hidden';},200)
        });
        function createBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            for (let i = 0; i < 6; i++) {
                const row = document.createElement('div');
                row.className = 'board-row';
                for (let j = 0; j < (costom?length2:length); j++) {
                    const tile = document.createElement('div');
                    tile.className = 'tile';
                    row.appendChild(tile);
                }
                board.appendChild(row);
            }
        }
        let keys = "QWERTYUIOPASDFGHJKZXCVBNM";
        let hasright={};
        let hasalright={};
        for (let i = 0; i < keys.length; i++) {
            hasright[keys[i]] = 0;
            hasalright[keys[i]] = 0;
        }
        function countLetter(str, o, letter) {
            let count = 0;
            for (let i = 0; i < str.length; i++) {
                if (str[i] === letter && o[i] === '1') {
                count++;
                }
            }
            return count;
        }
        function countLetter2(str, o, letter) {
            let count = 0;
            for (let i = 0; i < str.length; i++) {
                if (str[i] === letter && o[i] === '2') {
                count++;
                }
            }
            return count;
        }
        function handleSubmit() {
            if (currentTile < (costom?length2:length)) {
                const mess = document.getElementById('cant');
                messages.forEach(element => clearTimeout(element));
                messages=[];
                mess.style.color='#f77';
                mess.textContent='To short!';
                mess.style.visibility = 'visible';
                mess.style.opacity = '1';
                messages.push(setTimeout(()=> {
                    mess.style.opacity = '0';
                    messages.push(setTimeout(()=> {mess.style.visibility = 'hidden';},200));
                },1000));
                return;
            }
            let result = '0'.repeat(costom?length2:length);
            if (!(ext_words[costom?length2:length].includes(guess)))
            {
                const mess = document.getElementById('cant');
                messages.forEach(element => clearTimeout(element));
                messages=[];
                mess.style.color='#f77';
                mess.textContent='Word not found!';
                mess.style.visibility = 'visible';
                mess.style.opacity = '1';
                messages.push(setTimeout(()=> {
                    mess.style.opacity = '0';
                    messages.push(setTimeout(()=> {mess.style.visibility = 'hidden';},200))
                },1000));
                return;
            }
            if (currentRow < 6) {
                for (let i = 0; i < (costom?length2:length); i++) {
                    if (guess[i] === targetWord[i]) 
                    {
                        if(result[i]==='1') 
                        for (let j = i+1; j < guess.length; j++) {
                            if (guess[j] === targetWord[i] && result[j] === '0') {
                                result = result.substring(0, j) + '1' + result.substring(j + 1);
                                break;
                            }
                        }
                        result = result.substring(0, i) + '2' + result.substring(i + 1);
                    }
                    else for (let j = 0; j < guess.length; j++) {
                        if (guess[j] === targetWord[i] && result[j] === '0') {
                            result = result.substring(0, j) + '1' + result.substring(j + 1);
                            break;
                        }
                    }
                }
                if (result === '2'.repeat(costom?length2:length)) {
                    isWin = true;
                }
                const rows = document.querySelectorAll('.board-row');
                const tiles = rows[currentRow].querySelectorAll('.tile');
                for (let i = 0; i < (costom?length2:length); i++) {
                    const key = document.getElementById(guess[i]);
                    if (result[i] === '0') {
                        tiles[i].style.color = '#f8f8ff';
                        tiles[i].style.backgroundColor = '#aac';
                        tiles[i].style.border = '2px solid #aac';
                        if (key.className === 'key') {
                            key.className = 'keys gy-key';
                        }
                    }
                    else if (result[i] === '2') {
                        if(Tile[i].className != 'grTile') hasalright[guess[i]]+=1;
                        if(Tile[i].className === 'Tile') hasright[guess[i]]+=1;
                        Tile[i].className = 'grTile';
                        tiles[i].style.color = '#f8f8ff';
                        tiles[i].style.backgroundColor = '#4b4';
                        tiles[i].style.border = '2px solid #4b4';
                        key.className = 'keys gr-key';
                        if(hasright[guess[i]]>1) {
                            key.setAttribute('data-after-content', hasright[guess[i]]);
                        }
                    }
                    else {
                        let num = countLetter(guess, result, guess[i]);
                        let num2 = countLetter2(guess, result, guess[i]);
                        if(num+num2>hasright[guess[i]]) {
                            hasright[guess[i]]=num+num2;
                        }
                        num=hasright[guess[i]]-hasalright[guess[i]];
                        for (let j = 0; j < (costom?length2:length); j++) {
                            if (num > 0 && Tile[j].textContent === guess[i] && Tile[j].className != 'grTile') {
                                Tile[j].className = 'yeTile';
                                num--;
                            }
                            else {
                                if(Tile[j].className==='yeTile')Tile[j].className = 'Tile';
                            }
                        }
                        tiles[i].style.color = '#f8f8ff';
                        tiles[i].style.backgroundColor = '#ec3';
                        tiles[i].style.border = '2px solid #ec3';
                        if (key.className != 'keys gr-key') {
                            key.className = 'keys ye-key';
                        }
                        if(hasright[guess[i]]>1) {
                            key.setAttribute('data-after-content', hasright[guess[i]]);
                        }
                    }
                }
                guess = '';
                currentTile = 0;
                currentRow++;
                if (isWin) {
                    const result = document.getElementById('win');
                    result.style.visibility = 'visible';
                    result.style.opacity = '1';
                    setTimeout(()=> {
                        document.getElementById('overlay').style.visibility = 'visible';
                        document.getElementById('overlay').style.opacity = '1';
                        if (document.getElementById('answerMean').clientHeight > 41) {
                            document.getElementById('answerMean').style.textAlign = "left";
                        }
                        else {
                            document.getElementById('answerMean').style.textAlign = "center";
                        }
                    },200);
                }
                else if (currentRow == 6) {
                    const result = document.getElementById('lost');
                    result.style.visibility = 'visible';
                    result.style.opacity = '1';
                    setTimeout(()=> {
                        document.getElementById('overlay').style.visibility = 'visible';
                        document.getElementById('overlay').style.opacity = '1';
                        if (document.getElementById('answerMean').clientHeight > 41) {
                            document.getElementById('answerMean').style.textAlign = "left";
                        }
                        else {
                            document.getElementById('answerMean').style.textAlign = "center";
                        }
                    },200);
                }
            }
        }
        function updateTile(key) {
            if (isWin) return;
            if (currentRow == 6 && key != '\u21b5') return;
            const rows = document.querySelectorAll('.board-row');
            const tiles = rows[currentRow].querySelectorAll('.tile');
            if (key === '\u232b') {
                if (currentTile > 0) {
                    guess = guess.slice(0, -1);
                    currentTile--;
                    tiles[currentTile].textContent = '';
                }
            }
            else if (key === '\u21b5') {
                handleSubmit();
            }
            else {
                if (currentTile < (costom?length2:length)) {
                    guess += key;
                    tiles[currentTile].textContent = key;
                    currentTile++;
                }
            }
        }
        function createKeyboard() {
            const board = document.getElementById('keyboard');
            board.innerHTML = '';
            for (let i = 0; i < keyboardLayout.length; i++) {
                const row = document.createElement('div');
                row.className = 'keyboard-row';
                for (let j = 0; j < keyboardLayout[i].length; j++) {
                    const char = keyboardLayout[i][j];
                    const key = document.createElement('div');
                    key.className = char === '\u232b' ? 'keys bs-key' : char === '\u21b5' ? 'keys et-key' : 'keys key';
                    key.setAttribute('data-after-content', '');
                    if (char === '\u232b') {
                        const icon = document.createElement('i');
                        icon.className = 'fa fa-backspace';
                        key.appendChild(icon);
                    }
                    else
                    {
                        key.textContent = char === '\u21b5' ? 'Enter' : char;
                    }
                    key.id = char;
                    key.addEventListener('click', () => updateTile(char));
                    row.appendChild(key);
                }
                board.appendChild(row);
            }
            if(circl&&lastWord[costom?length2:length]!=undefined) {
                for (var i = 0; i < (costom?length2:length); i++) {
                    updateTile(lastWord[costom?length2:length][i].toUpperCase());
                }
                updateTile('\u21b5');
            }
            lastWord[costom?length2:length]=targetWord;
            saveToCookie((costom?length2:length),use_mini,see,circl,lastWord);
        }
        var queryString = window.location.search.substring(1);
        let targetWord = 'TRACE';
        let length2 = 4;
        function init(part=false) {
            generateOptions();
            document.getElementById('overlay').opacity = '0';
            document.getElementById('overlay').style.visibility = 'hidden';
            document.getElementById('settinglay').opacity = '0';
            document.getElementById('settinglay').style.visibility = 'hidden';
            isWin = false;
            if (!part) {
                let target = [];
                if(!costom)
                {
                    if(use_mini) target = mini_words[length];
                    else target = words[length];
                    const randomIndex = Math.floor(Math.random() * target.length);
                    targetWord = target[randomIndex][0].toUpperCase();
                    document.getElementById('answerMean').textContent = target[randomIndex][1];
                }
                else
                {
                    document.getElementById('answerMean').textContent = meaning[targetWord]===undefined?"暂无译义":meaning[targetWord];
                }
                let contain = document.getElementById('answerWord');
                contain.innerHTML = '';
                Tile = [];
                for (var i = 0; i < targetWord.length; i++) {
                    var div = document.createElement('div');
                    div.textContent = targetWord[i];
                    div.className = 'Tile';
                    Tile.push(div);
                    contain.appendChild(div);
                }
            }
            currentRow = 0;
            currentTile = 0;
            for (let i = 0; i < keys.length; i++) {
                hasright[keys[i]] = 0;
                hasalright[keys[i]] = 0;
            }
            guess = '';
            messages = [];
            document.getElementById('buttons').style.display = 'flex';
            document.getElementById('win').style.visibility = 'hidden';
            document.getElementById('win').style.opacity = '0';
            document.getElementById('lost').style.visibility = 'hidden';
            document.getElementById('lost').style.opacity = '0';
            document.getElementById('cant').style.visibility = 'hidden';
            document.getElementById('cant').style.opacity = '0';
            createBoard();
            createKeyboard();
        }
        if (queryString != '')
        {
            let word_=decode62(queryString);
            if (/^[A-Z]+$/.test(word_)) {
                targetWord = word_;
                length2 = targetWord.length;
                costom = true;
            }
            else {
                history.pushState(null, '', window.location.pathname);
            }
        }
        else {
            history.pushState(null, '', window.location.pathname);
        }
        init();
        document.addEventListener('keydown', (e) => {
            if ((e.key.match(/^[a-z]$/i) || (e.key === 'Backspace'&& !e.shiftKey) || (e.key === 'Enter'&& !e.shiftKey)) && !e.ctrlKey && !e.altKey && document.getElementById('settinglay').style.visibility != "visible") {
                event.preventDefault();
                const key = e.key === 'Backspace' ? '\u232b' : e.key === 'Enter' ? '\u21b5' : e.key.toUpperCase();
                updateTile(key);
            }
            else if ((e.key.match(/^[4-9]$/i)||e.key ==='a'||e.key ==='b') && !e.ctrlKey && !e.altKey && !e.shiftKey && document.activeElement!=document.getElementById('input')) {
                event.preventDefault();
                var number=e.key ==='a'?10:e.key ==='b'?11:parseInt(e.key);
                length=number;
                if(document.getElementById('settinglay').style.visibility === "visible") {
                    document.getElementById('nn').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    var options = document.querySelectorAll('.option');
                    options.forEach(function(option) {
                        option.classList.remove('selected');
                        if (parseInt(option.dataset.value)===number)option.classList.add('selected');
                    });
                    saveToCookie(length,use_mini,see,circl,lastWord);
                    costom = false;
                    history.pushState(null, '', window.location.pathname);
                    isWin = false;
                    let target = [];
                    if(use_mini) target = mini_words[length];
                    else target = words[length];
                    const randomIndex = Math.floor(Math.random() * target.length);
                    targetWord = target[randomIndex][0].toUpperCase();
                    let contain = document.getElementById('answerWord');
                    contain.innerHTML = '';
                    Tile = [];
                    for (var i = 0; i < targetWord.length; i++) {
                        var div = document.createElement('div');
                        div.textContent = targetWord[i];
                        div.className = 'Tile';
                        Tile.push(div);
                        contain.appendChild(div);
                    }
                    document.getElementById('answerMean').textContent = target[randomIndex][1];
                    currentRow = 0;
                    currentTile = 0;
                    guess = '';
                    messages = [];
                    document.getElementById('buttons').style.display = 'flex';
                    document.getElementById('win').style.visibility = 'hidden';
                    document.getElementById('win').style.opacity = '0';
                    document.getElementById('lost').style.visibility = 'hidden';
                    document.getElementById('lost').style.opacity = '0';
                    document.getElementById('cant').style.visibility = 'hidden';
                    document.getElementById('cant').style.opacity = '0';
                    createBoard();
                    createKeyboard();
                }
            }
            else if(event.ctrlKey) {
                if(e.key === 'r') {
                    event.preventDefault();
                    costom = false;
                    history.pushState(null, '', window.location.pathname);
                    init(); 
                }
                if(e.key === 's') {
                    event.preventDefault();
                    if(document.getElementById('overlay').style.visibility === "visible") {
                        copylink();
                    }
                    else if(document.getElementById('input') === document.activeElement) {
                        if(document.getElementById('see').className==="fa fa-eye") {
                            document.getElementById('see').className="fa fa-eye-slash";
                            document.getElementById('see').style.left="335px";
                            document.getElementById('input').type = 'text';
                            see=true;
                            saveToCookie(length,use_mini,see,circl,lastWord);
                        }
                        else if(document.getElementById('see').className==="fa fa-eye-slash") {
                            document.getElementById('see').className="fa fa-eye";
                            document.getElementById('see').style.left="336px";
                            document.getElementById('input').type = 'password';
                            see=false;
                            saveToCookie(length,use_mini,see,circl,lastWord);
                        }
                    }
                    else {
                        document.getElementById('settinglay').style.visibility = 'visible';
                        document.getElementById('settinglay').style.opacity = '1';
                    }
                }
                if(e.key === 'a') {
                    event.preventDefault();
                    if(document.getElementById('settinglay').style.visibility != "visible") {
                        currentRow = 6;
                        if (isWin) {
                            const result = document.getElementById('win');
                            result.style.visibility = 'visible';
                            result.style.opacity = '1';
                        }
                        else if (currentRow == 6) {
                            const result = document.getElementById('lost');
                            result.style.visibility = 'visible';
                            result.style.opacity = '1';
                        }
                        document.getElementById('overlay').style.visibility = 'visible';
                        document.getElementById('overlay').style.opacity = '1';
                        if (document.getElementById('answerMean').clientHeight > 41) {
                            document.getElementById('answerMean').style.textAlign = "left";
                        }
                        else {
                            document.getElementById('answerMean').style.textAlign = "center";
                        }
                    }
                }
                if(e.key === 'f') {
                    event.preventDefault();
                    if(document.getElementById('settinglay').style.visibility === "visible"&&document.getElementById('input') != document.activeElement)
                    {
                        document.getElementById('nf').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                        if(document.getElementById('easy').checked) {
                            document.getElementById('easy').checked=false;
                            saveToCookie(length,use_mini,see,circl,lastWord);
                        }
                        else {
                            document.getElementById('easy').checked=true;
                            saveToCookie(length,use_mini,see,circl,lastWord);
                        }
                    }
                }
                if(e.key === 'c')
                {
                    event.preventDefault();
                    if(document.getElementById('settinglay').style.visibility === "visible"&&document.getElementById('input') != document.activeElement)
                    {
                        document.getElementById('nc').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                        if(document.getElementById('circle').checked) {
                            document.getElementById('circle').checked=false;
                            saveToCookie(length,use_mini,see,circl,lastWord);
                        }
                        else {
                            document.getElementById('circle').checked=true;
                            saveToCookie(length,use_mini,see,circl,lastWord);
                        }
                    }
                }
                if(e.key === 'v')
                {
                    if(document.getElementById('settinglay').style.visibility != "visible")
                    {
                        event.preventDefault();
                        navigator.clipboard.readText()
                        .then(text => {
                            if(text.startsWith(window.location.origin + window.location.pathname+"?"))
                            {
                                queryString=text.substring(text.indexOf("?")+1);
                                if (queryString != '')
                                {
                                    let word_=decode62(queryString);
                                    if (/^[A-Z]+$/.test(word_))
                                    {
                                        targetWord = word_;
                                        length2 = targetWord.length;
                                        costom = true;
                                        history.pushState(null, '', text);
                                    }
                                    else
                                    {
                                        costom = false;
                                        history.pushState(null, '', window.location.pathname);
                                    }
                                }
                                init();
                            }
                            else if(text.startsWith(window.location.origin + window.location.pathname)) {
                                costom = false;
                                history.pushState(null, '', window.location.pathname);
                                init();
                            }
                            else {
                                costom = false;
                                history.pushState(null, '', window.location.pathname);
                                init();
                                const mess = document.getElementById('cant');
                                messages.forEach(element => clearTimeout(element));
                                messages=[];
                                mess.style.color='#f77';
                                mess.textContent='Invalid url!';
                                mess.style.visibility = 'visible';
                                mess.style.opacity = '1';
                                messages.push(setTimeout(()=> {
                                    mess.style.opacity = '0';
                                    messages.push(setTimeout(()=> {mess.style.visibility = 'hidden';},200));
                                },1000));
                            }
                        })
                        .catch(err => {
                            console.error('Failed to read clipboard contents: ', err);
                        });
                    }
                }
            }
            else if(e.keyCode === 27 && !e.ctrlKey && !e.altKey && !e.shiftKey)
            {
                event.preventDefault();
                if(document.getElementById('overlay').style.visibility === "visible")
                {
                    document.getElementById('overlay').style.opacity = '0';
                    setTimeout(()=> {document.getElementById('overlay').style.visibility = 'hidden';},200)
                }
                else if(document.getElementById('settinglay').style.visibility === "visible")
                {
                    document.getElementById('settinglay').style.opacity = '0';
                    setTimeout(()=> {document.getElementById('settinglay').style.visibility = 'hidden';},200)
                }
            }
            else if(e.keyCode === 9 && !e.ctrlKey && !e.altKey && !e.shiftKey)
            {
                event.preventDefault();
                if(document.getElementById('settinglay').style.visibility === "visible")
                {
                    if(document.getElementById('input') === document.activeElement) {
                        document.getElementById('input').blur();
                    }
                    else {
                        document.getElementById('input').focus();
                        document.getElementById('Copy').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }
                }
            }
            else if(e.key === 'Enter' && !e.ctrlKey && !e.altKey && !e.shiftKey)
            {
                event.preventDefault();
                if(document.getElementById('input') === document.activeElement)
                {
                    var word = document.getElementById('input').value.toUpperCase();
                    var exist = false;
                        for (let i = 4; i < 12; i++) {
                        if(ext_words[i].includes(word)) {
                            exist=true;
                            break;
                        }
                    }
                    if(exist) copyToClipboard(window.location.origin + window.location.pathname + "?"+encode62(word));
                    else {
                        cpms.forEach(element => clearTimeout(element));
                        cpms=[];
                        document.getElementById('cpd2').style.color='#f77';
                        document.getElementById('cpd2').style.left='60px';
                        document.getElementById('cpd2').textContent='Invalid word!';
                        document.getElementById('cpd2').style.opacity=1;
                        cpms.push(setTimeout(()=> {document.getElementById('cpd2').style.opacity = '0';},1000));
                    
                    }
                }
            }
        });
    </script>
</body>
</html>